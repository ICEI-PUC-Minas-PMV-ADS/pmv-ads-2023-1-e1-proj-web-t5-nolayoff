var db_vagas_inicial = {
    "vagas": [
        {
            "id": 1,
            "descricao": "Analista de Desenvolvimento BPM",
            "empresa" : "Sicoob Credicom" ,
            'sobreaempresa' :"O Sicoob Credicom é uma cooperativa financeira criada para os profissionais, estudantes e empresários da área de saúde. Com 31 anos de experiência no mercado, é uma instituição financeira sólida, autorizada pelo Banco Central e fiscalizada pelo Sicoob Central Cecremge – Central das Cooperativas de Economia e Crédito Mútuo do Estado de Minas Gerais.",
            'sobreavaga' :"Conectar Pessoas para promover Prosperidade com Justiça Financeira. Este é o PROPÓSITO do Sicoob Credicom, a maior cooperativa financeira da área de saúde do Brasil. Com 31 anos de experiência, somos uma instituição financeira sólida, regulada pelo Banco Central.",
            "tempo": "Integral",
            "cargo" : "Analista de Sistemas",
            "nivel" : "Pleno;sênior",
            "competenciadavaga" : "Clojure;Recursividade;Interfaces;Goroutine;Reflection;Padrão REST;Testes unitários;Banco de dados PostgreSQL;Docker",
            "salario": "A combinar",
            "email": "sicob@sicob.email.com",
            "telefone": "31-322-736-8031",
            "website": "http://sicob.com"
        
        },
        {
            "id": 2,
            "descricao": "Analista de sistema PL (Pessoa Desenvolvedora full stack)",
            "empresa" : "Siemens" ,
            'sobreaempresa' :"A Siemens é uma empresa global focada em tecnologia e inovação e está presente no Brasil há mais de 155 anos.",
            'sobreavaga' :"Você quer desempenhar um papel essencial na construção de um futuro melhor, trabalhando em projetos que possuem impacto na sociedade e no meio ambiente? Está interessado(a) em buscar por soluções revolucionárias que maximizem a criação de valor? Então junte-se à nossa equipe e venha construir o futuro na Siemens!",
            "tempo": "Integral",
            "cargo" : "Desenvolvedor Full stack",
            "nivel" : "Pleno",
            "competenciadavaga" : "LIMS;JSF (JavaServer Faces);Hibernate;Engenharia de controle e automação;Desenvolvimento de soluções;Desenvolvimento de sistemas;Controle de produção;Banco de dados Oracle;Aplicações industriais;",
            "salario": "7500,00",
            "email": "siemens@siemens.email.com",
            "telefone": "31-322-736-8031",
            "website": "http://Siemens.com"
        },
        {
            "id": 3,
            "descricao": "Analista de Sistemas e Aplicações",
            "empresa" : "SSA - São Salvador Alimentos" ,
            'sobreaempresa' :"Grupo empresarial que atua no ramo alimentício atendendo mercados dentro e fora do Brasil. A São Salvador Alimentos acredita que a maior riqueza de uma organização são os seus colaboradores, então o respeito ao fator humano é sempre o mais importante.",
            'sobreavaga' :"A OPORTUNIDADE Como Analista de Sistemas e Aplicações, você atuará de forma estratégica no T.I, em alinhamento com políticas e diretrizes da SSA. Sendo responsável por garantir a manutenção e o desenvolvimento de sistemas que apoiem os processos do negócio propondo soluções de melhorias e avaliar oportunidades de implantação de novas tecnologias a partir de um conhecimento profundo sobre os sistemas e os processos de negócio suportados por ele.",
            "tempo": "Integral",            
            "cargo" : "Analista de sistemas",
            "nivel" : "Pleno",
            "competenciadavaga" : "CSS;Desenvolvimento de back-end;ERP;Go;HTML;JQuery;JavaScript:Lógica;PHP",
            "salario": "A combinar",
            "email": "SSA@SSA.email.com",
            "telefone": "31-322-736-8031",
            "website": "http://SSA.com"
        },
        {
            "id": 4,
            "descricao": "Analista de TI - DB APOIO INTEGRAL.",
            "empresa" : "wabtec" ,
            'sobreaempresa' :"With more than 27,000 employees in over 50 countries around the world, Wabtec provides innovative solutions to our freight rail, passenger transit and industrial customers. Our history of innovation dates back a century and a half to George Westinghouse's invention of the air brake.",
            'sobreavaga' :"Empresa localizada na cidade de contagem/ mg do ramo administrativo contrata analista de ti Requisitos: • desejável ensino superior completo em tecnologia da informação ou áreas afins.",
            "tempo": "Integral",
            "cargo" : "Analista de sistemas",
            "nivel" : "Pleno",
            "competenciadavaga" : "CSS;Desenvolvimento de back-end;ERP;Go;HTML;JQuery;JavaScript:Lógica;PHP",
            "salario": "3500,00",
            "email": "wabtec@wabtec.email.com",
            "telefone": "31-322-736-8031",
            "website": "http://wabtec.com"
        },
        {
            "id": 5,
            "descricao": "Analista de TI - DB APOIO INTEGRAL.",
            "empresa" : "wabtec" ,
            'sobreaempresa' :"With more than 27,000 employees in over 50 countries around the world, Wabtec provides innovative solutions to our freight rail, passenger transit and industrial customers. Our history of innovation dates back a century and a half to George Westinghouse's invention of the air brake.",
            'sobreavaga' :"Empresa localizada na cidade de contagem/ mg do ramo administrativo contrata analista de ti Requisitos: • desejável ensino superior completo em tecnologia da informação ou áreas afins.",
            "tempo": "Integral",
            "cargo" : "Analista de sistemas",
            "nivel" : "Pleno",
            "competenciadavaga" : "CSS;Desenvolvimento de back-end;ERP;Go;HTML;JQuery;JavaScript:Lógica;PHP",
            "salario": "3500,00",
            "email": "wabtec@wabtec.email.com",
            "telefone": "31-322-736-8031",
            "website": "http://wabtec.com"
        },
        {
            "id": 6,
            "descricao": "Analista de TI - DB APOIO INTEGRAL.",
            "empresa" : "wabtec" ,
            'sobreaempresa' :"With more than 27,000 employees in over 50 countries around the world, Wabtec provides innovative solutions to our freight rail, passenger transit and industrial customers. Our history of innovation dates back a century and a half to George Westinghouse's invention of the air brake.",
            'sobreavaga' :"Empresa localizada na cidade de contagem/ mg do ramo administrativo contrata analista de ti Requisitos: • desejável ensino superior completo em tecnologia da informação ou áreas afins.",
            "tempo": "Integral",
            "cargo" : "Analista de sistemas",
            "nivel" : "Pleno",
            "competenciadavaga" : "CSS;Desenvolvimento de back-end;ERP;Go;HTML;JQuery;JavaScript:Lógica;PHP",
            "salario": "3500,00",
            "email": "wabtec@wabtec.email.com",
            "telefone": "31-322-736-8031",
            "website": "http://wabtec.com"
        },
        {
            "id": 7,
            "descricao": "Analista de TI - DB APOIO INTEGRAL.",
            "empresa" : "wabtec" ,
            'sobreaempresa' :"With more than 27,000 employees in over 50 countries around the world, Wabtec provides innovative solutions to our freight rail, passenger transit and industrial customers. Our history of innovation dates back a century and a half to George Westinghouse's invention of the air brake.",
            'sobreavaga' :"Empresa localizada na cidade de contagem/ mg do ramo administrativo contrata analista de ti Requisitos: • desejável ensino superior completo em tecnologia da informação ou áreas afins.",
            "tempo": "Integral",
            "cargo" : "Analista de sistemas",
            "nivel" : "Pleno",
            "competenciadavaga" : "CSS;Desenvolvimento de back-end;ERP;Go;HTML;JQuery;JavaScript:Lógica;PHP",
            "salario": "3500,00",
            "email": "wabtec@wabtec.email.com",
            "telefone": "31-322-736-8031",
            "website": "http://wabtec.com"
        },
        {
            "id": 8,
            "descricao": "Analista de TI - DB APOIO INTEGRAL.",
            "empresa" : "wabtec" ,
            'sobreaempresa' :"With more than 27,000 employees in over 50 countries around the world, Wabtec provides innovative solutions to our freight rail, passenger transit and industrial customers. Our history of innovation dates back a century and a half to George Westinghouse's invention of the air brake.",
            'sobreavaga' :"Empresa localizada na cidade de contagem/ mg do ramo administrativo contrata analista de ti Requisitos: • desejável ensino superior completo em tecnologia da informação ou áreas afins.",
            "tempo": "Integral",
            "cargo" : "Analista de sistemas",
            "nivel" : "Pleno",
            "competenciadavaga" : "CSS;Desenvolvimento de back-end;ERP;Go;HTML;JQuery;JavaScript:Lógica;PHP",
            "salario": "3500,00",
            "email": "wabtec@wabtec.email.com",
            "telefone": "31-322-736-8031",
            "website": "http://wabtec.com"
        },
        {
            "id": 9,
            "descricao": "Analista de TI - DB APOIO INTEGRAL.",
            "empresa" : "wabtec" ,
            'sobreaempresa' :"With more than 27,000 employees in over 50 countries around the world, Wabtec provides innovative solutions to our freight rail, passenger transit and industrial customers. Our history of innovation dates back a century and a half to George Westinghouse's invention of the air brake.",
            'sobreavaga' :"Empresa localizada na cidade de contagem/ mg do ramo administrativo contrata analista de ti Requisitos: • desejável ensino superior completo em tecnologia da informação ou áreas afins.",
            "tempo": "Integral",
            "cargo" : "Analista de sistemas",
            "nivel" : "Pleno",
            "competenciadavaga" : "CSS;Desenvolvimento de back-end;ERP;Go;HTML;JQuery;JavaScript:Lógica;PHP",
            "salario": "3500,00",
            "email": "wabtec@wabtec.email.com",
            "telefone": "31-322-736-8031",
            "website": "http://wabtec.com"
        },
        {
            "id": 10,
            "descricao": "Analista de TI - DB APOIO INTEGRAL.",
            "empresa" : "wabtec" ,
            'sobreaempresa' :"With more than 27,000 employees in over 50 countries around the world, Wabtec provides innovative solutions to our freight rail, passenger transit and industrial customers. Our history of innovation dates back a century and a half to George Westinghouse's invention of the air brake.",
            'sobreavaga' :"Empresa localizada na cidade de contagem/ mg do ramo administrativo contrata analista de ti Requisitos: • desejável ensino superior completo em tecnologia da informação ou áreas afins.",
            "tempo": "Integral",
            "cargo" : "Analista de sistemas",
            "nivel" : "Pleno",
            "competenciadavaga" : "CSS;Desenvolvimento de back-end;ERP;Go;HTML;JQuery;JavaScript:Lógica;PHP",
            "salario": "3500,00",
            "email": "wabtec@wabtec.email.com",
            "telefone": "31-322-736-8031",
            "website": "http://wabtec.com"
        }
    ]
}

var AuxCompetencias = {
    "data":[
        {
            "id": "1",
            "descricao":  "Desenvolvimento de back-end",
        },
        {
            "id": "2",
            "descricao":  "CSS",
        },
        {
            "id": "3",
            "descricao":  "Desenvolvimento de Front-end",
        },
        {
            "id": "4",
            "descricao":  "ERP",
        },
        {
            "id": "5",
            "descricao":  "Go",
        },
        {
            "id": "6",
            "descricao":  "JQuery",
        },
        {
            "id": "7",
            "descricao":  "JavaScript",
        },
        {
            "id": "8",
            "descricao":  "Lógica",
        },
        {
            "id": "9",
            "descricao":  "PHP",
        },
        {
            "id": "10",
            "descricao":  "html",
        },
        {
            "id": "11",
            "descricao":  "html5",
        },
        {
            "id": "12",
            "descricao":  "delphi",
        },
        {
            "id": "13",
            "descricao":  "React",
        },
        {
            "id": "14",
            "descricao":  "React-native",
        },
        {
            "id": "15",
            "descricao":  "html5",
        },
        {
            "id": "16",
            "descricao":  "Banco de Dados",
        },
        {
            "id": "17",
            "descricao":  "web Design",
        },
        {
            "id": "18",
            "descricao":  "UX/UI",
        },
        {
            "id": "19",
            "descricao":  "AngularJS",
        },
        {
            "id": "20",
            "descricao":  "Java",
        },
        {
            "id": "21",
            "descricao":  "Hibernate",
        },
        {
            "id": "22",
            "descricao":  "Entity Framework",
        },
        {
            "id": "23",
            "descricao":  "Spring",
        },
        {
            "id": "24",
            "descricao":  "MS SQL Server",
        },
        {
            "id": "25",
            "descricao":  "Banco de dados Oracle",
        },
        {
            "id": "26",
            "descricao":  "VueJS",
        },
        {
            "id": "27",
            "descricao":  "NodeJS",
        },
        {
            "id": "28",
            "descricao":  "Python",
        },
        {
            "id": "29",
            "descricao":  "Ionics",
        },
        {
            "id": "30",
            "descricao":  "Quasar",
        },
        {
            "id": "31",
            "descricao":  "C#",
        },
        {
            "id": "32",
            "descricao":  "Docker",
        },
        {
            "id": "33",
            "descricao":  "Flutter",
        },
        {
            "id": "34",
            "descricao":  "MS Azure Devops",
        },
        {
            "id": "35",
            "descricao":  "Flyway",
        },
        {
            "id": "36",
            "descricao":  "Clojure",
        },
        {
            "id": "37",
            "descricao":  "Recursividade",
        },
        {
            "id": "38",
            "descricao":  "Interfaces",
        },
        {
            "id": "39",
            "descricao":  "Goroutine",
        },
        {
            "id": "40",
            "descricao":  "Reflection",
        },
        {
            "id": "41",
            "descricao":  "Padrão REST",
        },
        {
            "id": "42",
            "descricao":  "Testes unitários",
        },
        {
            "id": "43",
            "descricao":  "Banco de dados PostgreSQL",
        },
        {
            "id": "44",
            "descricao":  "LIMS",
        },
        {
            "id": "45",
            "descricao":  "JSF (JavaServer Faces)",
        },
        {
            "id": "46",
            "descricao":  "Hibernate",
        },
        {
            "id": "47",
            "descricao":  "Engenharia de controle e automação",
        },
        {
            "id": "48",
            "descricao":  "Desenvolvimento de soluções",
        },
        {
            "id": "49",
            "descricao":  "Controle de produção",
        },
        {
            "id": "50",
            "descricao":  "Desenvolvimento de sistemas",
        },
        {
            "id": "51",
            "descricao":  "Aplicações industriais",
        }
]};

// Caso os dados já estejam no Local Storage, caso contrário, carrega os dados iniciais
var dbvagas = JSON.parse(localStorage.getItem('db_vagas'));
if (!dbvagas) {
    dbvagas = db_vagas_inicial
};

// Exibe mensagem em um elemento de ID msg
function displayMessage(msg) {
    $('#msg').html('<div class="alert alert-warning">' + msg + '</div>');
}

function insertVaga(vaga) {
    // Calcula novo Id a partir do último código existente no array (PODE GERAR ERRO SE A BASE ESTIVER VAZIA)
    let novoId = 1;
    if (dbvagas.vagas.length != 0) 
      novoId = dbvagas.vagas[dbvagas.vagas.length - 1].id + 1;
    let novaVaga = {
        "id": novoId,
        "descricao": vaga.descricao,
        "empresa" : vaga.empresa,
        "sobreaempresa": vaga.sobreaempresa,
        "sobreavaga" : vaga.sobreavaga,
        "tempo": vaga.tempo,
        "cargo" : vaga.cargo,
        "competenciadavaga": vaga.competenciadavaga,
        "salario": vaga.salario,
        "email": vaga.email,
        "telefone":vaga.telefone,
        "website":vaga.website,
    };

    // Insere o novo objeto no array
    dbvagas.vagas.push(novaVaga);
    displayMessage("Vaga inserida com sucesso");

    // Atualiza os dados no Local Storage
    localStorage.setItem('db_vagas', JSON.stringify(dbvagas));
}

function updateVaga(id, vaga) {
    // Localiza o indice do objeto a ser alterado no array a partir do seu ID
    let index = dbvagas.vagas.map(obj => obj.id).indexOf(id);

    // Altera os dados do objeto no array
    dbvagas.vagas[index].descricao = vaga.descricao,
    dbvagas.vagas[index].empresa = vaga.empresa,
    dbvagas.vagas[index].sobreaempresa = vaga.sobreaempresa,
    dbvagas.vagas[index].sobreavaga = vaga.sobreavaga,
    dbvagas.vagas[index].tempo = vaga.tempo,
    dbvagas.vagas[index].cargo = vaga.cargo,
    dbvagas.vagas[index].competenciadavaga = vaga.competenciadavaga,
    dbvagas.vagas[index].salario = vaga.salario,
    dbvagas.vagas[index].email = vaga.email
    dbvagas.vagas[index].telefone = vaga.telefone
    dbvagas.vagas[index].website = vaga.website

    displayMessage("Vaga alterada com sucesso");

    // Atualiza os dados no Local Storage
    localStorage.setItem('db_vagas', JSON.stringify(dbvagas));
}

function deleteVaga(id) {    
    // Filtra o array removendo o elemento com o id passado
    dbvagas.vagas = dbvagas.vagas.filter(function (element) { return element.id != id });

    displayMessage("Vaga removida com sucesso");

    // Atualiza os dados no Local Storage
    localStorage.setItem('db_vagas', JSON.stringify(ddbvagas));
}